# =============================================================================
# PlantillaAPI Environment Configuration Template
# =============================================================================
#
# Copy this file to '.env' and fill in your actual values
#
# CRITICAL SETTINGS (REQUIRED):
#   - DATABASE_URL
#   - DATAWAREHOUSE_URL
#   - SECRET_KEY
#
# Generate a SECRET_KEY with: python3 -c "import secrets; print(secrets.token_hex(32))"
# =============================================================================

# CRITICAL: Flask session encryption key (min 32 characters)
SECRET_KEY=your_secret_key_here_minimum_32_characters

# CRITICAL: Main application database (must be PostgreSQL)
DATABASE_URL=postgresql://username:password@host:port/database

# --- DEBUG SETTINGS ---
# FLASK_DEBUG: Controls debug mode (auto-reload, detailed error pages)
# WARNING: MUST be False (or unset) in production for security
# Set to 'True' ONLY for local development
# Default: False
FLASK_DEBUG=False

# --- EMAIL SETTINGS (IMPORTANT) ---
MAIL_SERVER=smtp.office365.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your_email@company.com
MAIL_PASSWORD=your_email_password
MAIL_DEFAULT_RECIPIENT=finance@company.com

# CRITICAL: External data warehouse connection (must be PostgreSQL)
DATAWAREHOUSE_URL=postgresql://username:password@host:port/datawarehouse

# --- CORS Configuration ---
# Comma-separated list of allowed origins for cross-origin requests
# Update this when deploying to different environments (dev, staging, production)
CORS_ALLOWED_ORIGINS=http://localhost:5000,http://127.0.0.1:5000

# =============================================================================
# FRONTEND CONFIGURATION (React + Vite)
# =============================================================================

# --- API Base URL Configuration ---
# VITE_API_BASE_URL: Base URL for API requests from the frontend
#
# IMPORTANT FOR VERCEL MONOREPO:
# - Leave this EMPTY (or omit entirely) for relative paths
# - Relative paths work because frontend and backend share the same domain
# - In development: Vite proxy forwards /api and /auth to Flask backend
# - In production: Vercel routes /api and /auth to serverless functions
#
# WHEN TO SET THIS:
# - Only set if running backend on a completely different domain (rare)
# - For standard development: Leave empty (Vite proxy handles routing)
#
# Default: "" (empty = relative paths, recommended)
VITE_API_BASE_URL=

# =============================================================================
# SUPABASE CONFIGURATION (FRONTEND)
# =============================================================================
#
# VITE_SUPABASE_URL: Your Supabase project URL
# Find at: Supabase Dashboard → Project Settings → API → Project URL
# Example: https://abcdefghijklmno.supabase.co
#
# VITE_SUPABASE_ANON_KEY: Your Supabase anonymous/public key
# Find at: Supabase Dashboard → Project Settings → API → Project API keys → anon/public
#
# IMPORTANT:
# - These keys are SAFE to expose in frontend code (public by design)
# - VITE_ prefix is REQUIRED for Vite to expose these to the browser
# - Never use the SERVICE_ROLE key in frontend (it's secret, backend only)
#
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here

# =============================================================================
# SUPABASE CONFIGURATION (BACKEND)
# =============================================================================
#
# SUPABASE_JWT_SECRET: Secret key for verifying Supabase JWT tokens
# Find at: Supabase Dashboard → Project Settings → API → JWT Settings → JWT Secret
#
# CRITICAL:
# - This is the secret used by backend to verify JWT token signatures
# - Must match exactly with Supabase project JWT secret
# - Keep this SECRET (do not expose in frontend or commit to git)
# - Backend uses this in app/jwt_auth.py for token validation
#
# Already configured in your backend - verify it matches Supabase Dashboard value
SUPABASE_JWT_SECRET=your_jwt_secret_here

# SUPABASE_SERVICE_ROLE_KEY: Admin key for backend-only Supabase operations
# Find at: Supabase Dashboard → Project Settings → API → Project API keys → service_role
#
# CRITICAL SECURITY:
# - This key has FULL admin access to your Supabase project
# - NEVER expose this in frontend code or commit to public repos
# - Used ONLY by backend for admin operations (e.g., updating user_metadata)
# - Required for role update functionality (updates user roles in Supabase Auth)
#
# WARNING: Keep this secret! Only use in backend server code
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
